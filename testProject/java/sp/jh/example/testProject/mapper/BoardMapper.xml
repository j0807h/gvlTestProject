<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTO Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="sp.jh.example.testProject.mapper.BoardMapper">
<sql id="column">
	board_num,USER_ID, BOARD_WRITER, BOARD_SUBJECT, BOARD_CONTENT, BOARD_COUNT, IP_ADDR, BOARD_FILE, BOARD_REGIST
</sql>
<select id="getCode" resultType="int" parameterType="sp.jh.example.testProject.domain.BoardDTO">
	SELECT NEXTVAL(board_seq)
</select>
<select id="count" resultType="int" parameterType="sp.jh.example.testProject.domain.BoardDTO">
	SELECT NEXTVAL(board_count)
</select>

<insert id="registBoard" parameterType="sp.jh.example.testProject.domain.BoardDTO">
	insert into board( <include refid="column" /> )
		values(#{boardNum},#{userId},#{boardWriter},#{boardSubject},#{boardContent},null,#{ipAddr},#{boardFile},sysdate())
</insert>

<select id="getBoardList" parameterType="sp.jh.example.testProject.domain.BoardDTO" resultType="sp.jh.example.testProject.domain.BoardDTO">
select * from ( select ROW_NUMBER(), 
<include refid="column"/>
from ( select 
<include refid="column"/>
from board 
<where>
	<if test="boardNum != null">board_num = #{boardNum} </if>
</where>
)) 
<if test="startEndPageDTO != null">
	where ROW_NUMBER() between #{startEndPageDTO.startPage} and #{startEndPageDTO.endPage} 
	<!-- getStartEndPageDTO().getStartPage()와 같은 의미 -->
</if>
</select>
<select id="getCount" resultType="int">select count(*) from board </select>

</mapper>
